<input id="property_transfer_transaction_data" value="<%= @property_transfer_transaction_data %>" type="hidden" />



<canvas id="property_transfer_transaction_chart_van" width="200" height="150"></canvas>
<canvas id="property_transfer_transaction_chart_van_invest" width="200" height="150"></canvas>
<canvas id="property_transfer_transaction_chart_van_foreign" width="200" height="150"></canvas>

<script>

$(document).ready(function() {
	var property_transfer_transaction_data = $("#property_transfer_transaction_data").val();
	var json = JSON.parse(property_transfer_transaction_data);
	
	//console.log(json.area[0]['property transfer transactions'][1]['transaction']['country']);

	var data_van = {
	    labels: ["Citizen","Foreign"],
	    datasets: [
	        {
	            data: [
	            	json.area[1]['property transfer transactions'][0]['transaction']['total'],
	            	json.area[1]['property transfer transactions'][1]['transaction']['total']
	            ],
	            backgroundColor: ["#36A2EB","#FFCE56"],
	            hoverBackgroundColor: ["#36A2EB","#FFCE56"]
	        }
	    ]
	};

	var pie_chart_van = new Chart($("#property_transfer_transaction_chart_van"),{
	    type: 'pie',
	    data: data_van
	});


	var data_van_invest = {
	    labels: ["Citizen","Foreign"],
	    datasets: [
	        {
	            data: [5042992716,350940465],
	            backgroundColor: ["#36A2EB","#FFCE56"],
	            hoverBackgroundColor: ["#36A2EB","#FFCE56"]
	        }
	    ]
	};

	var pie_chart_van_invest = new Chart($("#property_transfer_transaction_chart_van_invest"),{
	    type: 'pie',
	    data: data_van_invest
	});




	var van_foreign = json.area[1]['property transfer transactions'][1]['transaction']['country'];
	var size_van_foreign = Object.keys(van_foreign).length;

	var data_van_foreign = {
	    labels: Object.keys(van_foreign),
	    datasets: [
	        {
	        	label: "Property Transfer Transactions",
	        	data: Object.values(van_foreign),
	        	backgroundColor: 'rgba(75, 192, 192, 0.7)',
	        	borderColor: 'rgba(75, 192, 192, 1)',
	        	borderWidth: 1
	        }
	    ]
	};

	var pie_chart_van_foreign = new Chart($("#property_transfer_transaction_chart_van_foreign"),{
	    type: 'bar',
	    data: data_van_foreign,
	    options: options_basic
	});



	var options_basic = {
		scales: {
			yAxes: [{
				ticks: {
					beginAtZero: true
				}
			}]
		}
	};


	var colors_van_foreign = [];
	for (var i = 0; i < size_van_foreign; i++) {
		colors_van_foreign.push( randomColor() );
	}

	function randomColor() {
	    var r = Math.floor(Math.random() * 255);
	    var g = Math.floor(Math.random() * 255);
	    var b = Math.floor(Math.random() * 255);
	    return "rgb(" + r + "," + g + "," + b + ")";
	}

});

</script>